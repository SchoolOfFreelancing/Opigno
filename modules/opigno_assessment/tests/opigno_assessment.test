<?php

/**
 * @file
 * Defines a Unit test for quiz assessments and module settings.
 */

class OpignoAssessmentTestCase extends AbstractOpignoTestCase {

  protected $privileged_user;

  protected $authenticated_user;

  public function getInfo() {
    return array(
      'name' => 'Opigno Assessment',
      'description' => 'Ensure that the assessment on quizzes works correctly.',
      'group' => 'Opigno',
    );
  }

  public function setUp() {
    parent::setUp('opigno_assessment', 'matching');

    // Configure Opigno
    $this->configureOpigno();

    // Create users
    $this->privileged_user = $this->drupalCreateUser(array(
      // Node
      'access content',
      'create quiz content',
      'edit any quiz content',
      'create matching content',
      'edit any matching content',
      'create course content',
      'edit any course content',
      // Opigno
      'administer opigno',
      // Opigno Assessment
      'edit course assessment options',
      'edit quiz assessment options',
      // Quiz
      'access quiz',
      'view any quiz results',
      'score any quiz',
    ));

    $this->authenticated_user = $this->drupalCreateUser(array(
      'access content',
      'access quiz',
      'view own quiz results',
    ));

    // Create a course
    $this->gid = $this->createCourse('course', $this->privileged_user, array('tools_activate[quizzes]' => 'quizzes'));

    // Login privileged user
    $this->drupalLogin($this->privileged_user);
  }

  /**
   *
   */
  public function testAssessmentSingleQuiz() {
    $this->assertTrue(1, 'true');
  }

  protected function _addQuiz($questions = array(), $ponderation = 1) {
    $nid = $this->addOGContent('quiz', $this->gid, $this->privileged_user, array('opigno_assessment[ponderation]' => $ponderation));
  }

}
